# نكاز CRM - نظام إدارة خدمات المصاعد

نظام إدارة علاقات العملاء الشامل المصمم لشركة نكاز لخدمات المصاعد. هذا التطبيق الحديث يقوم برقمنة جميع سير العمل الورقي ويوفر منصة مركزية لإدارة العملاء والمشاريع والعقود والمدفوعات والفواتير.

## 🚀 الميزات

### الوظائف الأساسية
- **لوحة التحكم**: نظرة عامة على مؤشرات الأداء الرئيسية مع المقاييس والتنبيهات والنشاط الأخير
- **إدارة العملاء**: قاعدة بيانات شاملة للعملاء مع معلومات الاتصال وتاريخ المشاريع
- **تتبع المشاريع**: إدارة مشاريع التركيب والصيانة والإصلاح
- **إدارة العقود**: التعامل مع العقود مع مواصفات المصاعد وإنشاء ملفات PDF
- **معالجة المدفوعات**: تتبع المدفوعات بطرق دفع متعددة
- **إدارة الفواتير**: إنشاء وإدارة الفواتير مع إمكانيات التحميل

### الأمان والتحكم في الوصول
- **المصادقة القائمة على الأدوار**: ثلاثة أدوار للمستخدمين (مدير، مشرف، مستخدم)
- **المسارات المحمية**: التحكم في الوصول على مستوى المسار
- **أذونات على مستوى المكونات**: عرض/إخفاء عناصر واجهة المستخدم بناءً على دور المستخدم

### تجربة المستخدم
- **التصميم المتجاوب**: محسن للهاتف المحمول (320px+) إلى سطح المكتب
- **واجهة مستخدم حديثة**: واجهة نظيفة ومهنية مع رسوم متحركة سلسة
- **جاهز للوضع المظلم**: نسب تباين مناسبة تلبي معايير WCAG AA
- **ردود فعل في الوقت الفعلي**: إشعارات منبثقة لإجراءات المستخدم
- **جداول متقدمة**: إمكانيات البحث والفرز والتصفية والترقيم

## 🛠 المكدس التقني

- **الواجهة الأمامية**: React 18 + TypeScript + Vite
- **التصميم**: Tailwind CSS مع رسوم متحركة مخصصة
- **إدارة الحالة**: Zustand لإدارة الحالة العامة الخفيفة
- **التوجيه**: React Router v6 مع مسارات محمية
- **الأيقونات**: Lucide React
- **الخلفية التجريبية**: JSON Server للتطوير
- **النماذج**: React Hook Form مع التحقق
- **معالجة التاريخ**: مكتبة date-fns

## 📦 التثبيت والإعداد

### المتطلبات الأساسية
- Node.js 18+ 
- npm أو yarn

### البدء السريع

1. **تثبيت التبعيات**
   ```bash
   npm install
   ```

2. **بدء خادم التطوير**
   ```bash
   npm run dev
   ```

3. **الوصول إلى التطبيق**
   - الواجهة الأمامية: `http://localhost:5173`

### بيانات اعتماد تجريبية

| الدور | اسم المستخدم | كلمة المرور | الصلاحيات |
|--------|-------------|------------|-----------|
| مدير | admin | admin123 | CRUD كامل + الموافقة/التصدير |
| مشرف | supervisor | super123 | إضافة وتعديل (بدون حذف/تصدير) |
| مستخدم | viewer | view123 | وصول للقراءة فقط |

## 🏗 الهيكل

### هيكل المشروع
```
src/
├── components/
│   ├── auth/           # مكونات المصادقة
│   ├── layout/         # مكونات التخطيط (الشريط الجانبي، التخطيط)
│   └── ui/            # مكونات واجهة المستخدم القابلة لإعادة الاستخدام
├── pages/             # مكونات الصفحات
├── store/             # متاجر Zustand
├── types/             # تعريفات أنواع TypeScript
└── hooks/             # خطافات React مخصصة
```

### إدارة الحالة
- **متجر المصادقة**: مصادقة المستخدم وإدارة الأدوار
- **متجر التطبيق**: بيانات التطبيق (العملاء، المشاريع، العقود، إلخ)
- **الحالة المحلية**: حالة خاصة بالمكون مع خطافات React

### هيكل المكونات
- **التصميم الذري**: مكونات قابلة لإعادة الاستخدام (زر، إدخال، نافذة منبثقة، جدول البيانات)
- **حراس الأدوار**: نظام أذونات على مستوى المكون
- **المسارات المحمية**: التحكم في الوصول على مستوى المسار
- **التصميم المتجاوب**: نهج الهاتف المحمول أولاً مع نقاط توقف Tailwind

## 🔧 التطوير

### النصوص المتاحة
- `npm run dev` - بدء خادم التطوير
- `npm run build` - البناء للإنتاج
- `npm run preview` - معاينة بناء الإنتاج
- `npm run lint` - تشغيل ESLint

### جودة الكود
- **TypeScript**: تم تمكين الوضع الصارم
- **ESLint**: تم تكوينه مع قواعد React و TypeScript
- **Prettier**: تنسيق الكود (تكوين حسب الحاجة)

## 🚀 نشر الإنتاج

### البناء للإنتاج
```bash
npm run build
```

### استبدال API التجريبي
التطبيق مصمم لاستبدال خادم JSON التجريبي بسهولة بخلفية حقيقية:

1. **تحديث عنوان URL الأساسي لـ API**
   - تعديل ثابت `API_BASE` في ملفات المتجر
   - التحديث من `http://localhost:3001` إلى API الإنتاج الخاص بك

2. **تكامل المصادقة**
   - استبدال المصادقة التجريبية في `authStore.ts`
   - التكامل مع نظام المصادقة القائم على JWT/الجلسة

3. **تكامل رفع الملفات**
   - استبدال رفع base64 التجريبي بتخزين ملفات حقيقي (AWS S3، إلخ)
   - تحديث مكونات رفع الملفات في النماذج

4. **متغيرات البيئة**
   ```bash
   VITE_API_BASE_URL=https://your-api.com
   VITE_AUTH_ENDPOINT=/api/auth
   ```

### المكدس الخلفي الموصى به
- **API**: Node.js + Express أو .NET Core
- **قاعدة البيانات**: PostgreSQL أو MongoDB
- **المصادقة**: رموز JWT
- **تخزين الملفات**: AWS S3 أو مماثل
- **إنشاء PDF**: Puppeteer أو مماثل

## 📱 التصميم المتجاوب

التطبيق متجاوب بالكامل مع نقاط التوقف:
- **الهاتف المحمول**: 320px - 767px
- **الجهاز اللوحي**: 768px - 1023px  
- **سطح المكتب**: 1024px+

### تحسينات الهاتف المحمول
- واجهة صديقة للمس
- التنقل القابل للطي
- جداول بيانات محسنة
- سلوك النافذة المنبثقة/الدرج المتجاوب

## 🔐 ميزات الأمان

### المصادقة
- تسجيل دخول آمن باسم المستخدم/كلمة المرور
- التحكم في الوصول القائم على الأدوار
- إدارة الجلسة مع Zustand persist

### التفويض
- الحماية على مستوى المسار
- أذونات على مستوى المكون
- التحقق من الدور القائم على الإجراء

### حماية البيانات
- التحقق من صحة الإدخال والتطهير
- الحماية من XSS من خلال React
- حماية CSRF جاهزة لتكامل الخلفية

## 🎨 نظام التصميم

### لوحة الألوان
- **الأساسي**: الأزرق (#3B82F6)
- **الثانوي**: الأزرق المخضر (#14B8A6)
- **المميز**: البرتقالي (#F97316)
- **النجاح**: الأخضر (#10B981)
- **التحذير**: الأصفر (#F59E0B)
- **الخطأ**: الأحمر (#EF4444)

### الطباعة
- **الخط**: مكدس خطوط النظام للأداء الأمثل
- **الأوزان**: عادي (400)، متوسط (500)، شبه عريض (600)، عريض (700)
- **ارتفاعات الخط**: 150% لنص الجسم، 120% للعناوين

### التباعد
- **النظام**: وحدة أساسية 8px (زيادات 0.5rem)
- **متسق**: مطبق في جميع أنحاء الواجهة

## 📊 الأداء

### ميزات التحسين
- **تقسيم الكود**: مسارات محملة بكسل
- **تحسين الحزمة**: تحسينات Vite المدمجة
- **تحسين الصور**: مراجع الصور الخارجية (Pexels)
- **العرض الفعال**: أفضل ممارسات React

### أهداف الأداء
- **CLS**: < 0.1
- **LCP**: < 2.5s على الهاتف المحمول
- **نقاط Lighthouse**: 90+ عبر جميع المقاييس

## 🤝 المساهمة

### سير عمل التطوير
1. إنشاء فرع ميزة من الرئيسي
2. تنفيذ التغييرات مع TypeScript
3. اختبار عبر أحجام شاشة مختلفة
4. ضمان الامتثال لإمكانية الوصول
5. تقديم طلب سحب

### معايير الكود
- وضع TypeScript الصارم
- امتثال ESLint
- توثيق المكونات
- اختبار التصميم المتجاوب

## 📄 الترخيص

هذا المشروع هو برنامج مملوك تم تطويره لشركة نكاز لخدمات المصاعد.

## 🆘 الدعم

للدعم الفني أو الأسئلة:
- تحقق من وثائق README
- راجع أمثلة المكونات في قاعدة الكود
- اختبر مع بيانات الاعتماد التجريبية المقدمة
- تحقق من تشغيل نقاط نهاية API

---

**تم البناء بـ ❤️ لشركة نكاز لخدمات المصاعد**